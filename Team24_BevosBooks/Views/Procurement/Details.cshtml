@model Team24_BevosBooks.Models.Book

@{
    ViewData["Title"] = "Book Details (Procurement)";
}

<h2 class="mt-4 mb-3">Book Details</h2>

<div class="row">
    <div class="col-md-6">
        <dl class="row">
            <dt class="col-sm-4">Title</dt>
            <dd class="col-sm-8">@Model.Title</dd>

            <dt class="col-sm-4">Authors</dt>
            <dd class="col-sm-8">@Model.Authors</dd>

            <dt class="col-sm-4">Genre</dt>
            <dd class="col-sm-8">@Model.Genre?.GenreName</dd>

            <dt class="col-sm-4">Publish Date</dt>
            <dd class="col-sm-8">@Model.PublishDate.ToShortDateString()</dd>

            <dt class="col-sm-4">Price</dt>
            <dd class="col-sm-8">@Model.Price.ToString("C")</dd>

            <dt class="col-sm-4">Inventory</dt>
            <dd class="col-sm-8">@Model.InventoryQuantity</dd>

            <dt class="col-sm-4">Reorder Point</dt>
            <dd class="col-sm-8">@Model.ReorderPoint</dd>

            <dt class="col-sm-4">Book Number</dt>
            <dd class="col-sm-8">@Model.BookNumber</dd>

            <dt class="col-sm-4">Status</dt>
            <dd class="col-sm-8">@Model.BookStatus</dd>
        </dl>
    </div>
</div>

<hr />

<h3>Approved Reviews</h3>
@if (Model.Reviews != null && Model.Reviews.Any())
{
    foreach (var review in Model.Reviews.Where(r => r.DisputeStatus == "Approved"))
    {
        <div class="border p-2 mb-2">
            <strong>@review.Reviewer?.FirstName @review.Reviewer?.LastName</strong>
            <span class="ms-2">Rating: @review.Rating</span>
            <p>@review.ReviewText</p>
        </div>
    }
}
else
{
    <p>No approved reviews yet.</p>
}

<hr />

<div class="mt-3">
    <a asp-action="Index" asp-controller="Procurement" class="btn btn-secondary">Back to Procurement List</a>
</div>
