@model IEnumerable<Team24_BevosBooks.Models.Book>

@{
    ViewData["Title"] = "Home";
    ViewData["FullWidth"] = true;
}

<style>
    .hero-logo {
        width: 130px;
        max-width: 130px;
        height: auto;
        object-fit: contain;
        display: block;
        margin: 0 auto 1.5rem;
    }

    .hero-bg {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        pointer-events: none;
    }

    .hero-content {
        position: relative;
        z-index: 5;
    }

    .hero-container {
        position: relative;
        z-index: 0;
    }

    .promo-wave-marquee {
        position: relative;
        width: 100%;
        overflow: hidden;
        padding: 1.25rem 0;
        z-index: 999999;
        display: flex;
        justify-content: center;
        background: transparent;
    }

    .promo-wave-track {
        display: flex;
        width: 100%;
    }

    .promo-wave-marquee svg {
        width: 900px;
        height: 80px;
        flex-shrink: 0;
    }

    .promo-wave-text {
        fill: #ffffff; /* white text */
        font-size: 1.6rem;
        font-weight: 600;
    }
</style>

<!-- HERO SECTION -->
<section class="hero-container">
    <div class="hero-bg"></div>

    <div class="hero-content text-center">
        <img src="~/BevoBookLogo.png" alt="Bevo Books Logo" class="hero-logo" />
        <h1 class="hero-title">Bevo’s Books</h1>
        <p class="hero-subtitle">Your online bookstore for all your favorite titles.</p>

        <!-- Search bar -->
        <form asp-controller="Books" asp-action="Index" method="get"
              class="hero-searchbar d-flex justify-content-center mt-4">
            <input type="text"
                   name="searchString"
                   value="@Context.Request.Query["searchString"]"
                   class="form-control hero-search-input"
                   placeholder="Search books by title or author..." />
            <button type="submit" class="btn hero-btn-solid ms-2">Search</button>
        </form>
    </div>
</section>

<!-- PROMO MARQUEE -->
<div class="promo-wave-marquee">
    <div class="promo-wave-track">
        @foreach (var promo in ViewBag.Promos as List<Team24_BevosBooks.Models.Coupon>)
        {
            <svg xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 0 1200 120"
                 preserveAspectRatio="none">
                <path id="promoWavePath@promo.CouponID"
                      d="M 0 60
                         C 200 20, 400 100, 600 60
                         C 800 20, 1000 100, 1200 60"
                      fill="none" stroke="none" />
                <text class="promo-wave-text">
                    <textPath href="#promoWavePath@promo.CouponID" text-anchor="start">
                        ★ Promo: Use code @promo.CouponCode —
                        @(promo.CouponType == "PercentOff"
                            ? $"{promo.DiscountPercent}% off your order!"
                            : !promo.FreeThreshold.HasValue
                                ? "Free shipping on all orders!"
                                : $"Free shipping over ${promo.FreeThreshold}") ★
                    </textPath>
                </text>
            </svg>
        }
    </div>
</div>
